import{e as ne,F as se,a as le,r as R,p as ae,b as U,_ as H,d as re,c as ce}from"./a6lkYA1V.js";import M from"./DIIMWSnV.js";import{n as O,s as K,v as ue,r as v,x as G,y as N,z as I,A as Q,c as k,o as x,a as p,b as i,t as S,B as ie,u as c,q as j,w as g,C as V,F as z,D as J,E as X,p as $,d as D,G as P,T as me,f as de,H as pe,I as fe,h as W,J as _e,K as xe,L as ye,M as Y,N as ve}from"./BafQYLYr.js";const be={class:"relative mt-1 mb-5"},he=["for"],ge=["onClick"],we=O({__name:"AppAutocomplete",props:K({name:{type:String,required:!0},label:{type:String,default:""},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:K(["selected"],["update:modelValue"]),setup(s,{emit:r}){ue(s,"modelValue");const u=s,m=r,n=v(""),a=v(!1),t=v(-1),e=G("inputRef"),o=G("listRef"),l=N(()=>n.value?u.items.filter(_=>_.value.toLowerCase().includes(n.value.toLowerCase())):u.items),b=()=>{a.value=!0,t.value=-1},f=_=>{switch(_.key){case"ArrowUp":_.preventDefault(),d(-1);break;case"ArrowDown":_.preventDefault(),d(1);break;case"Enter":_.preventDefault(),t.value>=0&&h(l.value[t.value]);break;case"Escape":a.value=!1,e.value.$el.blur();break}},d=_=>{const w=l.value.length;w&&(t.value=Math.max(-1,Math.min(w-1,t.value+_)))},h=_=>{n.value=_.value,a.value=!1,t.value=-1,m("selected",_)},y=_=>{a.value&&(e.value.$el.contains(_.target)||o.value.contains(_.target)||(a.value=!1))};return I(()=>{document.addEventListener("click",y)}),Q(()=>{document.removeEventListener("click",y)}),(_,w)=>{const q=ne,L=M;return x(),k("div",be,[p("label",{for:s.name},S(s.label),9,he),i(q,ie({modelValue:c(n),"onUpdate:modelValue":w[0]||(w[0]=A=>j(n)?n.value=A:null),name:s.name,onInput:b,onKeydown:f,onFocus:w[1]||(w[1]=A=>a.value=!0),ref_key:"inputRef",ref:e,class:"text-field peer"},_.$attrs),null,16,["modelValue","name"]),i(me,{name:"fade"},{default:g(()=>[c(a)&&c(l).length?(x(),k("ul",{key:0,ref_key:"listRef",ref:o,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg"},[(x(!0),k(z,null,J(c(l),(A,B)=>(x(),k("li",{key:A.value,class:X(["pl-2 flex h-7 items-center cursor-pointer hover:bg-gray-200 rounded-full transition",{"bg-gray-100":B===c(t)}]),onClick:F=>h(A)},[A.icon?(x(),$(L,{key:0,name:A.icon.name,class:"w-5 h-5 pl-2 mr-4",style:P({color:A.icon.color})},null,8,["name","style"])):V("",!0),D(" "+S(A.title),1)],10,ge))),128))],512)):V("",!0)]),_:1})])}}}),T=[{icon:"material-symbols:home",color:"#990073",bgColor:"#ffe6f9",name:"House"},{icon:"ic:round-catching-pokemon",color:"#ff3300",bgColor:"#ffe6e6",name:"Pet"},{icon:"material-symbols:sports-basketball",color:"#00cca3",bgColor:"#e6fffa",name:"Entertainment"},{icon:"material-symbols:fastfood",color:"#ffcc00",bgColor:"#fffae6",name:"Food"},{icon:"material-symbols:travel-luggage-and-bags",color:"#663300",bgColor:"#ffe6cc",name:"Travel"},{icon:"mdi:heart-plus",color:"#b30000",bgColor:"#ffb3b3",name:"Health"},{icon:"mdi:tshirt-crew",color:"#00aaff",bgColor:"#e6f7ff",name:"Clothes"},{icon:"material-symbols:featured-seasonal-and-gifts",color:"#00b300",bgColor:"#e6ffe6",name:"Gift"},{icon:"material-symbols:account-balance",color:"#ffcc00",bgColor:"#ffcccc",name:"Tax"},{icon:"material-symbols:productivity",color:"#3385ff",bgColor:"#e6f0ff",name:"Productivity"},{icon:"material-symbols:view-quilt",color:"#4d4d4d",bgColor:"#e6e6e6",name:"Others"}];function Ce(s){return T.find(r=>r.name===s).color}const ke={class:"bg-teal-50 flex gap-4 mobile:rounded-t-md py-5 px-7"},Ae={class:"w-10 h-10 my-auto shadow-md bg-white flex justify-center items-center rounded-xl"},Ee={class:"bg-teal-50 text-teal-700 absolute inset-y-0 left-0 px-2 flex items-center pointer-events-none rounded-s-lg border peer-focus:border-teal-800"},$e={class:"flex justify-end pt-5 pb-2"},Se={__name:"Form",emits:["submit"],setup(s,{emit:r}){const u=r,m=v(["One time","Monthly","Annual"]),n=v(null),a=N(()=>m.value.map(o=>({title:o,value:o}))),t=N(()=>T.map(o=>({title:o.name,value:o.name,icon:{name:o.icon,color:o.color}})));function e(o){u("submit",o),n.value.resetForm()}return(o,l)=>{const b=M,f=le,d=we,h=U,y=se,_=H;return x(),$(_,null,{default:g(()=>[p("div",ke,[p("div",Ae,[i(b,{name:"material-symbols-light:chart-data-outline-rounded",class:"text-3xl text-primary-700 rotate-90"})]),l[0]||(l[0]=p("div",{class:"my-auto ml-2"},[p("span",{class:"font-bold block text-lg"},"Add new expense"),p("span",{class:"text-xs"}," Fill in the form with the details of the expense ")],-1))]),i(y,{class:"mx-7 my-4 pt-3",onSubmit:e,ref_key:"formRef",ref:n},{default:g(({errors:w})=>[i(f,{label:"Name",name:"name",error:w.name,rules:c(R),type:"text"},null,8,["error","rules"]),i(f,{label:"Amount",type:"text",name:"amount","input-class":"pl-12",rules:c(ae),error:w.expense},{prepend:g(()=>[p("div",Ee,[i(b,{name:"material-symbols-light:paid-outline",class:"text-xl"})])]),_:2},1032,["rules","error"]),i(d,{error:w.frequency,items:c(a),rules:c(R),label:"Frequency",name:"frequency"},null,8,["error","items","rules"]),i(d,{error:w.categories,items:c(t),rules:c(R),label:"Category",name:"category"},null,8,["error","items","rules"]),i(f,{label:"Description (optional)",as:"textarea",type:"text",name:"description",error:w.description},null,8,["error"]),p("div",$e,[i(h,null,{default:g(()=>l[1]||(l[1]=[D(" Add Expense ")])),_:1})])]),_:1},512)]),_:1})}}},Ve={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},Te={class:"flex bg-white rounded-lg shadow-lg relative min-w-[300px] max-w-[500px]"},Ne=O({__name:"AppDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:r}){const u=s,m=r,n=v(!1),a=e=>{n.value&&e.key==="Escape"&&t()};de(()=>n.value=u.modelValue);function t(){n.value=!1,m("update:modelValue",!1)}return I(()=>{document.addEventListener("keydown",a)}),Q(()=>{document.removeEventListener("keydown",a)}),(e,o)=>(x(),$(fe,{to:"body"},[c(n)?(x(),k("div",Ve,[p("div",{class:"fixed inset-0 bg-black opacity-40",onClick:t}),p("div",Te,[p("button",{class:"absolute z-10 top-2 cursor-pointer right-4 text-gray-600 hover:text-red-500 text-lg font-bold",type:"button",onClick:t}," âœ• "),pe(e.$slots,"default")])])):V("",!0)]))}}),Oe={props:{modelValue:{type:[String,Number],default:()=>""}},emits:["update:modelValue"],setup(s,{slots:r,emit:u}){const m=()=>r.default()[0].children.map(a=>xe(a,{variant:a.props.value===s.modelValue?"":"outlined",onClick:t=>{const e=t.target.value;u("update:modelValue",e)}}));let n=m();return W(()=>s.modelValue,()=>{n=m()}),()=>_e("span",{class:"flex flex-wrap gap-1"},n)}},Be=Symbol.for("nuxt:client-only"),Ie=O({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:r,attrs:u}){const m=v(!1);return I(()=>{m.value=!0}),ye(Be,!0),n=>{var o;if(m.value)return(o=r.default)==null?void 0:o.call(r);const a=r.fallback||r.placeholder;if(a)return a();const t=n.fallback||n.placeholder||"",e=n.fallbackTag||n.placeholderTag||"span";return k(e,u,t)}}}),Fe=O({__name:"DonutChart",props:{expenses:{type:Array,required:!0}},setup(s){const r=s,u=v([]),m=v([]),n=v([]),a=v({labels:u,colors:m,plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,fontSize:18,formatter:function(t){return"$"+t.globals.seriesTotals.reduce((e,o)=>e+o,0)},color:"#1f2937"}}}}}});return I(()=>{const t={},o=r.expenses.reduce((l,b)=>{const{category:f,amount:d}=b;return t[f]||(t[f]=0),t[f]=t[f]+=Number(d),l.push({categoryName:f,total:t[f]}),l},[]).map(l=>{const{categoryName:b,total:f}=l,d=T.find(h=>h.name===b);return{total:f,color:d.color,name:d.name}});if(o.sort((l,b)=>b.total-l.total),o.length>5){const l=[...o];l.splice(0,5);const b=l.reduce((f,d)=>f+d.total,0);o.splice(5,o.length-5),o.push({total:b,color:"#a6a6a6",name:"Others"})}u.value=[],m.value=[],n.value=[],o.forEach(l=>{u.value.push(l.name),m.value.push(l.color),n.value.push(l.total)})}),(t,e)=>{const o=Y("apexchart"),l=Ie;return x(),$(l,null,{default:g(()=>[i(o,{type:"donut",options:c(a),series:c(n),class:"my-2"},null,8,["options","series"])]),_:1})}}}),De={class:"flex items-center py-2"},Me={class:"w-full flex"},qe={class:"flex flex-col text-gray-800"},Le={class:"font-bold"},Re={class:"text-sm mt-2"},je={class:"flex flex-col ml-auto items-end"},ze={class:"text-sm pr-3"},Je=O({__name:"Item",props:{expense:{type:Object,required:!0},category:{type:Object,required:!0}},emits:["remove"],setup(s,{emit:r}){const u=r;function m(){u("remove")}return(n,a)=>{const t=M,e=U;return x(),k("div",De,[p("div",{class:"min-w-8 w-8 h-8 mr-3 flex justify-center items-center rounded-full",style:P({background:s.category.bgColor})},[i(t,{name:s.category.icon,style:P({color:s.category.color})},null,8,["name","style"])],4),p("div",Me,[p("div",qe,[p("span",Le,S(s.expense.name),1),p("p",Re,S(s.expense.description),1)]),p("div",je,[p("span",ze,"$ "+S(s.expense.amount),1),i(e,{variant:"text",onClick:m},{default:g(()=>[i(t,{name:"material-symbols:delete-outline",class:"w-5 h-5 text-red-700 hover:text-red-800 transition-all duration-100 ease-in-out"})]),_:1})])])])}}}),Pe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ue=O({__name:"LineChart",props:{expenses:{type:Array,required:!0}},setup(s){const r=s,u=v([]),m=N(()=>{const a=r.expenses.reduce((e,o)=>{const{category:l,amount:b,frequency:f}=o;return e[l]||(e[l]=Array.from(Array(12)).map(()=>0)),f.toLowerCase()==="monthly"&&(e[l]=e[l].map(d=>d+Number(b))),f.toLowerCase()==="annual"&&(e[l]=e[l].map(d=>Math.round((d+Number(b))/12))),e},{}),t=[];for(const e in a)u.value.push(Ce(e)),a.hasOwnProperty(e)&&t.push({name:e,data:a[e]});return t}),n=N(()=>({colors:u.value,chart:{height:350,type:"line",zoom:{enabled:!1}},xaxis:{categories:Pe},yaxis:{title:{text:"Money"}}}));return(a,t)=>{const e=Y("apexchart");return x(),$(e,{type:"line",width:"100%",height:"250px",options:c(n),series:c(m)},null,8,["options","series"])}}}),Ke={__name:"ScrollDownArrow",emits:["scrollToStats"],setup(s,{emit:r}){const u=r;function m(){u("scrollToStats")}return(n,a)=>{const t=M;return x(),k("button",{class:"p-3 shadow-lg bg-teal-50 text-teal-700 rounded-full focus:bg-teal-700 focus:text-white hover:bg-teal-700 hover:text-white transition ease-in-out duration-100 fixed bottom-2 right-auto",onClick:m},[i(t,{name:"material-symbols:arrow-cool-down",class:"w-7 h-7"})])}}},Ge=ve("expenses",()=>{let s=v([]);function r(e){e.id=t(),s.value.push(e),n(),a()}function u(e){s.value=s.value.filter(o=>o.id!=e),n()}function m(){s.value=[],n()}function n(){localStorage&&localStorage.setItem("expenses",JSON.stringify(s.value))}function a(){if(!window)return;const e=localStorage.getItem("expenses");s.value=e?JSON.parse(e):[]}function t(){let e=1;const o=new Set;return s.value.forEach(l=>{for(o.add(l.id);o.has(e);)e++}),e}return{expenses:s,addExpense:r,removeExpense:u,clearExpenses:m,loadExpenses:a}}),He={class:"flex flex-col md:flex-row gap-5 md:items-start"},Qe={id:"expense-stats",class:"w-full"},Xe={class:"flex flex-wrap gap-3"},We={key:0,class:"flex justify-center mt-6"},Ye={key:0,class:"flex justify-center mt-6"},nt={__name:"index",setup(s){const r=Ge(),u=v(null),m=v(!1),n=v(0),a=v(["All","One time","Monthly","Annual"]),t=v("All"),e=v(!1);function o(){const h=document.getElementById("expense-stats");h&&(h.scrollIntoView({behavior:"smooth"}),b())}function l(h){r.addExpense(h),u!=null&&u.value&&u.value.openToast("New expense added!")}function b(){m.value=!1}function f(h){return T[T.findIndex(y=>y.name==h)]}const d=N(()=>r.expenses.filter(y=>t.value==="All"?!0:y.types===t.value));return W(d,()=>n.value++),I(()=>{r.loadExpenses()}),(h,y)=>{const _=U,w=Se,q=Ne,L=Oe,A=Fe,B=ce,F=H,Z=Je,ee=Ue,te=re,oe=Ke;return x(),k("div",null,[y[4]||(y[4]=p("h1",{class:"text-3xl font-bold mb-5"},"Expenses Tracker",-1)),i(_,{onClick:y[0]||(y[0]=C=>e.value=!0),class:"mb-5"},{default:g(()=>y[3]||(y[3]=[D("Add Expense")])),_:1}),p("div",He,[i(q,{modelValue:c(e),"onUpdate:modelValue":y[1]||(y[1]=C=>j(e)?e.value=C:null)},{default:g(()=>[i(w,{onSubmit:l})]),_:1},8,["modelValue"]),p("div",Qe,[i(L,{modelValue:c(t),"onUpdate:modelValue":y[2]||(y[2]=C=>j(t)?t.value=C:null),class:"mb-4"},{default:g(()=>[(x(!0),k(z,null,J(c(a),(C,E)=>(x(),$(_,{key:`expense-type-${E}`,value:C},{default:g(()=>[D(S(C),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),p("div",Xe,[i(F,null,{default:g(()=>{var C;return[(C=c(d))!=null&&C.length?V("",!0):(x(),k("div",We," No expenses! Add one ")),i(B,null,{default:g(()=>{var E;return[(E=c(d))!=null&&E.length?(x(),$(A,{key:c(n),expenses:c(d),categories:"categories"in h?h.categories:c(T)},null,8,["expenses","categories"])):V("",!0)]}),_:1})]}),_:1}),i(F,null,{default:g(()=>{var C;return[(C=c(d))!=null&&C.length?V("",!0):(x(),k("div",Ye," No expenses! Add one ")),i(B,null,{default:g(()=>[(x(!0),k(z,null,J(c(d),E=>(x(),$(Z,{key:E.id,expense:E,category:f(E.category),class:"border-b last:border-0 border-gray-300",onRemove:Ze=>c(r).removeExpense(E.id)},null,8,["expense","category","onRemove"]))),128))]),_:1})]}),_:1}),i(F,null,{default:g(()=>[i(B,null,{default:g(()=>[i(ee,{expenses:c(d)},null,8,["expenses"])]),_:1})]),_:1})])])]),i(te,{ref_key:"appToaster",ref:u},null,512),i(oe,{class:X(["transition-opacity",{"opacity-100":c(m),"opacity-0":!c(m)}]),onScrollToStats:o},null,8,["class"])])}}};export{nt as default};
