import O from"./CBmbuD_a.js";import{e as ee,F as te,a as oe,r as M,p as ne,b as z,_ as G,d as se,c as ae}from"./56Yebu6i.js";import{n as I,s as K,v as le,r as h,x as U,y as N,z as F,A as re,c as C,o as x,a as _,b as d,t as E,B as ce,u as c,q as H,w as g,C as B,F as R,D as L,E as Q,p as S,d as J,G as j,T as ue,h as X,H as ie,I as me,J as de,K as W,L as pe}from"./ghAk-JoZ.js";const fe={class:"relative mt-1 mb-5"},_e=["for"],xe=["onClick"],ye=I({__name:"AppAutocomplete",props:K({name:{type:String,required:!0},label:{type:String,default:""},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:K(["selected"],["update:modelValue"]),setup(s,{emit:r}){le(s,"modelValue");const u=s,p=r,a=h(""),l=h(!1),t=h(-1),e=U("inputRef"),o=U("listRef"),n=N(()=>a.value?u.items.filter(f=>f.value.toLowerCase().includes(a.value.toLowerCase())):u.items),y=()=>{l.value=!0,t.value=-1},i=f=>{switch(f.key){case"ArrowUp":f.preventDefault(),m(-1);break;case"ArrowDown":f.preventDefault(),m(1);break;case"Enter":f.preventDefault(),t.value>=0&&b(n.value[t.value]);break;case"Escape":l.value=!1,e.value.$el.blur();break}},m=f=>{const v=n.value.length;v&&(t.value=Math.max(-1,Math.min(v-1,t.value+f)))},b=f=>{a.value=f.value,l.value=!1,t.value=-1,p("selected",f)},$=f=>{l.value&&(e.value.$el.contains(f.target)||o.value.contains(f.target)||(l.value=!1))};return F(()=>{document.addEventListener("click",$)}),re(()=>{document.removeEventListener("click",$)}),(f,v)=>{const q=ee,V=O;return x(),C("div",fe,[_("label",{for:s.name},E(s.label),9,_e),d(q,ce({modelValue:c(a),"onUpdate:modelValue":v[0]||(v[0]=w=>H(a)?a.value=w:null),name:s.name,onInput:y,onKeydown:i,onFocus:v[1]||(v[1]=w=>l.value=!0),ref_key:"inputRef",ref:e,class:"text-field peer"},f.$attrs),null,16,["modelValue","name"]),d(ue,{name:"fade"},{default:g(()=>[c(l)&&c(n).length?(x(),C("ul",{key:0,ref_key:"listRef",ref:o,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg"},[(x(!0),C(R,null,L(c(n),(w,D)=>(x(),C("li",{key:w.value,class:Q(["pl-2 flex h-7 items-center cursor-pointer hover:bg-gray-200 rounded-full transition",{"bg-gray-100":D===c(t)}]),onClick:P=>b(w)},[w.icon?(x(),S(V,{key:0,name:w.icon.name,class:"w-5 h-5 pl-2 mr-4",style:j({color:w.icon.color})},null,8,["name","style"])):B("",!0),J(" "+E(w.title),1)],10,xe))),128))],512)):B("",!0)]),_:1})])}}}),T=[{icon:"material-symbols:home",color:"#990073",bgColor:"#ffe6f9",name:"House"},{icon:"ic:round-catching-pokemon",color:"#ff3300",bgColor:"#ffe6e6",name:"Pet"},{icon:"material-symbols:sports-basketball",color:"#00cca3",bgColor:"#e6fffa",name:"Entertainment"},{icon:"material-symbols:fastfood",color:"#ffcc00",bgColor:"#fffae6",name:"Food"},{icon:"material-symbols:travel-luggage-and-bags",color:"#663300",bgColor:"#ffe6cc",name:"Travel"},{icon:"mdi:heart-plus",color:"#b30000",bgColor:"#ffb3b3",name:"Health"},{icon:"mdi:tshirt-crew",color:"#00aaff",bgColor:"#e6f7ff",name:"Clothes"},{icon:"material-symbols:featured-seasonal-and-gifts",color:"#00b300",bgColor:"#e6ffe6",name:"Gift"},{icon:"material-symbols:account-balance",color:"#ffcc00",bgColor:"#ffcccc",name:"Tax"},{icon:"material-symbols:productivity",color:"#3385ff",bgColor:"#e6f0ff",name:"Productivity"},{icon:"material-symbols:view-quilt",color:"#4d4d4d",bgColor:"#e6e6e6",name:"Others"}];function he(s){return T.find(r=>r.name===s).color}const be={class:"bg-teal-50 flex gap-4 mobile:rounded-t-md py-5 px-7"},ve={class:"w-10 h-10 my-auto shadow-md bg-white flex justify-center items-center rounded-xl"},ge={class:"bg-teal-50 text-teal-700 absolute inset-y-0 left-0 px-2 flex items-center pointer-events-none rounded-s-lg border peer-focus:border-teal-800"},we={class:"flex justify-end pt-5 pb-2"},Ce={__name:"Form",emits:["submit"],setup(s,{emit:r}){const u=r,p=h(["One time","Monthly","Annual"]),a=h(null),l=N(()=>p.value.map(o=>({title:o,value:o}))),t=N(()=>T.map(o=>({title:o.name,value:o.name,icon:{name:o.icon,color:o.color}})));function e(o){u("submit",o),a.value.resetForm()}return(o,n)=>{const y=O,i=oe,m=ye,b=z,$=te,f=G;return x(),S(f,null,{default:g(()=>[_("div",be,[_("div",ve,[d(y,{name:"material-symbols-light:chart-data-outline-rounded",class:"text-3xl text-primary-700 rotate-90"})]),n[0]||(n[0]=_("div",{class:"my-auto ml-2"},[_("span",{class:"font-bold block text-lg"},"Add new expense"),_("span",{class:"text-xs"}," Fill in the form with the details of the expense ")],-1))]),d($,{class:"mx-7 my-4 pt-3",onSubmit:e,ref_key:"formRef",ref:a},{default:g(({errors:v})=>[d(i,{label:"Name",name:"name",error:v.name,rules:c(M),type:"text"},null,8,["error","rules"]),d(i,{label:"Amount",type:"text",name:"amount","input-class":"pl-12",rules:c(ne),error:v.expense},{prepend:g(()=>[_("div",ge,[d(y,{name:"material-symbols-light:paid-outline",class:"text-xl"})])]),_:2},1032,["rules","error"]),d(m,{error:v.frequency,items:c(l),rules:c(M),label:"Frequency",name:"frequency"},null,8,["error","items","rules"]),d(m,{error:v.categories,items:c(t),rules:c(M),label:"Category",name:"category"},null,8,["error","items","rules"]),d(i,{label:"Description (optional)",as:"textarea",type:"text",name:"description",error:v.description},null,8,["error"]),_("div",we,[d(b,null,{default:g(()=>n[1]||(n[1]=[J(" Add Expense ")])),_:1})])]),_:1},512)]),_:1})}}},ke={props:{modelValue:{type:[String,Number],default:()=>""}},emits:["update:modelValue"],setup(s,{slots:r,emit:u}){const p=()=>r.default()[0].children.map(l=>me(l,{variant:l.props.value===s.modelValue?"":"outlined",onClick:t=>{const e=t.target.value;u("update:modelValue",e)}}));let a=p();return X(()=>s.modelValue,()=>{a=p()}),()=>ie("span",{class:"flex flex-wrap gap-1"},a)}},Ae=Symbol.for("nuxt:client-only"),Se=I({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(s,{slots:r,attrs:u}){const p=h(!1);return F(()=>{p.value=!0}),de(Ae,!0),a=>{var o;if(p.value)return(o=r.default)==null?void 0:o.call(r);const l=r.fallback||r.placeholder;if(l)return l();const t=a.fallback||a.placeholder||"",e=a.fallbackTag||a.placeholderTag||"span";return C(e,u,t)}}}),$e=I({__name:"DonutChart",props:{expenses:{type:Array,required:!0}},setup(s){const r=s,u=h([]),p=h([]),a=h([]),l=h({labels:u,colors:p,plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,fontSize:18,formatter:function(t){return"$"+t.globals.seriesTotals.reduce((e,o)=>e+o,0)},color:"#1f2937"}}}}}});return F(()=>{const t={},o=r.expenses.reduce((n,y)=>{const{category:i,amount:m}=y;return t[i]||(t[i]=0),t[i]=t[i]+=Number(m),n.push({categoryName:i,total:t[i]}),n},[]).map(n=>{const{categoryName:y,total:i}=n,m=T.find(b=>b.name===y);return{total:i,color:m.color,name:m.name}});if(o.sort((n,y)=>y.total-n.total),o.length>5){const n=[...o];n.splice(0,5);const y=n.reduce((i,m)=>i+m.total,0);o.splice(5,o.length-5),o.push({total:y,color:"#a6a6a6",name:"Others"})}u.value=[],p.value=[],a.value=[],o.forEach(n=>{u.value.push(n.name),p.value.push(n.color),a.value.push(n.total)})}),(t,e)=>{const o=W("apexchart"),n=Se;return x(),S(n,null,{default:g(()=>[d(o,{type:"donut",options:c(l),series:c(a),class:"my-2"},null,8,["options","series"])]),_:1})}}}),Ee={class:"flex items-center py-2"},Te={class:"w-full flex"},Ne={class:"flex flex-col text-gray-800"},Ve={class:"font-bold"},Be={class:"text-sm mt-2"},Ie={class:"flex flex-col ml-auto items-end"},Oe={class:"text-sm pr-3"},Fe=I({__name:"Item",props:{expense:{type:Object,required:!0},category:{type:Object,required:!0}},emits:["remove"],setup(s,{emit:r}){const u=r;function p(){u("remove")}return(a,l)=>{const t=O,e=z;return x(),C("div",Ee,[_("div",{class:"min-w-8 w-8 h-8 mr-3 flex justify-center items-center rounded-full",style:j({background:s.category.bgColor})},[d(t,{name:s.category.icon,style:j({color:s.category.color})},null,8,["name","style"])],4),_("div",Te,[_("div",Ne,[_("span",Ve,E(s.expense.name),1),_("p",Be,E(s.expense.description),1)]),_("div",Ie,[_("span",Oe,"$ "+E(s.expense.amount),1),d(e,{variant:"text",onClick:p},{default:g(()=>[d(t,{name:"material-symbols:delete-outline",class:"w-5 h-5 text-red-700 hover:text-red-800 transition-all duration-100 ease-in-out"})]),_:1})])])])}}}),qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],De=I({__name:"LineChart",props:{expenses:{type:Array,required:!0}},setup(s){const r=s,u=h([]),p=N(()=>{const l=r.expenses.reduce((e,o)=>{const{category:n,amount:y,frequency:i}=o;return e[n]||(e[n]=Array.from(Array(12)).map(()=>0)),i.toLowerCase()==="monthly"&&(e[n]=e[n].map(m=>m+Number(y))),i.toLowerCase()==="annual"&&(e[n]=e[n].map(m=>Math.round((m+Number(y))/12))),e},{}),t=[];for(const e in l)u.value.push(he(e)),l.hasOwnProperty(e)&&t.push({name:e,data:l[e]});return t}),a=N(()=>({colors:u.value,chart:{height:350,type:"line",zoom:{enabled:!1}},xaxis:{categories:qe},yaxis:{title:{text:"Money"}}}));return(l,t)=>{const e=W("apexchart");return x(),S(e,{type:"line",width:"100%",height:"250px",options:c(a),series:c(p)},null,8,["options","series"])}}}),Me={__name:"ScrollDownArrow",emits:["scrollToStats"],setup(s,{emit:r}){const u=r;function p(){u("scrollToStats")}return(a,l)=>{const t=O;return x(),C("button",{class:"p-3 shadow-lg bg-teal-50 text-teal-700 rounded-full focus:bg-teal-700 focus:text-white hover:bg-teal-700 hover:text-white transition ease-in-out duration-100 fixed bottom-2 right-auto",onClick:p},[d(t,{name:"material-symbols:arrow-cool-down",class:"w-7 h-7"})])}}},Re=pe("expenses",()=>{let s=h([]);function r(e){e.id=t(),s.value.push(e),a(),l()}function u(e){s.value=s.value.filter(o=>o.id!=e),a()}function p(){s.value=[],a()}function a(){localStorage&&localStorage.setItem("expenses",JSON.stringify(s.value))}function l(){if(!window)return;const e=localStorage.getItem("expenses");s.value=e?JSON.parse(e):[]}function t(){let e=1;const o=new Set;return s.value.forEach(n=>{for(o.add(n.id);o.has(e);)e++}),e}return{expenses:s,addExpense:r,removeExpense:u,clearExpenses:p,loadExpenses:l}}),Le={class:"flex flex-col md:flex-row gap-5 md:items-start"},je={id:"expense-stats",class:"w-full"},ze={class:"flex flex-wrap gap-3"},Je={key:0,class:"flex justify-center mt-6"},Pe={key:0,class:"flex justify-center mt-6"},Qe={__name:"index",setup(s){const r=Re(),u=h(null),p=h(!1),a=h(0),l=h(["All","One time","Monthly","Annual"]),t=h("All");function e(){const m=document.getElementById("expense-stats");m&&(m.scrollIntoView({behavior:"smooth"}),n())}function o(m){r.addExpense(m),u!=null&&u.value&&u.value.openToast("New expense added!")}function n(){p.value=!1}function y(m){return T[T.findIndex(b=>b.name==m)]}const i=N(()=>r.expenses.filter(b=>t.value==="All"?!0:b.types===t.value));return X(i,()=>a.value++),F(()=>{r.loadExpenses()}),(m,b)=>{const $=Ce,f=z,v=ke,q=$e,V=ae,w=G,D=Fe,P=De,Y=se,Z=Me;return x(),C("div",null,[b[1]||(b[1]=_("h1",{class:"text-3xl font-bold mb-5"},"Expenses Tracker",-1)),_("div",Le,[d($,{onSubmit:o}),_("div",je,[d(v,{modelValue:c(t),"onUpdate:modelValue":b[0]||(b[0]=k=>H(t)?t.value=k:null),class:"mb-4"},{default:g(()=>[(x(!0),C(R,null,L(c(l),(k,A)=>(x(),S(f,{key:`expense-type-${A}`,value:k},{default:g(()=>[J(E(k),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),_("div",ze,[d(w,null,{default:g(()=>{var k;return[(k=c(i))!=null&&k.length?B("",!0):(x(),C("div",Je," No expenses! Add one ")),d(V,null,{default:g(()=>{var A;return[(A=c(i))!=null&&A.length?(x(),S(q,{key:c(a),expenses:c(i),categories:"categories"in m?m.categories:c(T)},null,8,["expenses","categories"])):B("",!0)]}),_:1})]}),_:1}),d(w,null,{default:g(()=>{var k;return[(k=c(i))!=null&&k.length?B("",!0):(x(),C("div",Pe," No expenses! Add one ")),d(V,null,{default:g(()=>[(x(!0),C(R,null,L(c(i),A=>(x(),S(D,{key:A.id,expense:A,category:y(A.category),class:"border-b last:border-0 border-gray-300",onRemove:Ke=>c(r).removeExpense(A.id)},null,8,["expense","category","onRemove"]))),128))]),_:1})]}),_:1}),d(w,null,{default:g(()=>[d(V,null,{default:g(()=>[d(P,{expenses:c(i)},null,8,["expenses"])]),_:1})]),_:1})])])]),d(Y,{ref_key:"appToaster",ref:u},null,512),d(Z,{class:Q(["transition-opacity",{"opacity-100":c(p),"opacity-0":!c(p)}]),onScrollToStats:e},null,8,["class"])])}}};export{Qe as default};
